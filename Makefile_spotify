URL=https://developer.spotify.com/download/libspotify/libspotify-12.1.51-Linux-x86_64-release.tar.gz
FILENAME=$(notdir ${URL})
# .tar.gz, need two basename
DIRNAME=$(basename $(basename ${FILENAME}))

all: fetch unzip moveheaders
	@echo "All done!"

unzip: external/${FILENAME}
	echo "Extracting external/${FILENAME}"
	cd external && tar -xf ${FILENAME}

moveheaders: external/${DIRNAME}
	mkdir external/spotify
	cp `find external/${DIRNAME} -name "libspotify*.so*"` external/spotify
	cp `find external/${DIRNAME} -name "api.h"` external/spotify

fetch:
	echo "Fetching libspotify.so from ${URL} to ${FILENAME}"
	wget --progress=bar ${URL} -O external/${FILENAME}

clean:
	rm -r external/${DIRNAME}
	rm -r external/${FILENAME}

